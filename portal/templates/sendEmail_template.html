<div class="row justify-content-center" flow-init
     flow-name="uploader.flow"
     flow-files-submitted="$flow.upload()"
     flow-file-success="fileUploadSuccess( $file, $message, $flow )"
     >
  <div class="col card card-body shadow-0">
    
<!--     <tags-input ng-model="mailTo" use-strings="true" placeholder="send mail to..." add-on-space="true" allowed-tags-pattern="^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$"></tags-input> -->
    <tags-input ng-model="mailTo" placeholder="send mail to..." add-on-space="true" allowed-tags-pattern="^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$"></tags-input>
    <small><p class="text-right text-primary"><span ng-click="toggleCC()">Add CC</span> &nbsp; <span ng-click="toggleBCC()">Add BCC</span></p></small>
    
    <tags-input ng-show="showCC" class="margin-top-10" ng-model="mailCC" placeholder="Add CC" add-on-space="true" allowed-tags-pattern="^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$"></tags-input>
    <tags-input ng-show="showBCC" class="margin-top-10" ng-model="mailBCC" placeholder="Add BCC" add-on-space="true" allowed-tags-pattern="^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$"></tags-input>
    
    <input ng-model="$parent.mailSubject" class="form-control form-control-sm margin-top-10" type="text" placeholder="Subject" required />
    
    <br>
    <small><span class="btn btn-primary btn-sm" flow-btn>Attach files</span></small>
    <div class="row justify-content-center">
      <table class="col-10" flow-transfers>
        <small><tr ng-repeat="file in transfers">
            <small><td style="width: 5%">{{$index+1}}</td>
            <td style="width: 65%" class="text-truncate">{{file.name}}</td></small>
            <td style="width: 25%">
              <div class="progress"  style="height:6px">
                <div class="progress-bar" ng-style="{ 'width' : (file.progress()*100) + '%', 'height' : '6px'}" ng-class="{'bg-success': file.progress() == 1}"></div>
              </div>
            </td>
            <td style="width: 5%">
              <button type="button" class="close" aria-label="Close" ng-click="file.cancel()">
                <span aria-hidden="true">&times;</span>
              </button>  
            </td>
        </tr></small>
      </table>
    </div>

<!--     <span class="btn btn-primary btn-rounded" ng-click="logIt()">Log</span> -->
    <br>
    <div text-angular ng-model="$parent.emailBody"></div>
  </div>
</div>